library(dplyr)
library(lubridate)

aircondition_march<-c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1) # 1-31
aircondition_april<-c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1) # 1-30
aircondition_may<-c(1, 3, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1) # 1-12

weather_march <- c(2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 1, 2, 5, 1, 1, 2, 2, 2, 2, 1, 1, 5, 0, 5, 2, 2, 2, 2, 4, 0, 1) # 1-31
weather_april <-c(5, 5, 2, 2, 2, 1, 4, 4, 1, 1, 1, 2, 2, 1, 5, 2, 4, 1, 2, 1, 1, 2, 1, 1, 1, 1, 4, 1, 1, 2) # 1-30
weather_may <-c(2, 2, 2, 2, 2, 1, 5, 3, 2, 2, 2, 2, 1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 2, 2, 2, 3, 1, NA,NA,NA,NA) # 1-31

#pdata
key_list <- pdata$Key
pdata = read.csv("AvailableTime.csv") # att ????????? ???????????? ?????? ????????????
date_str_list <- pdata$Date # ?????? ???????????? ?????? ?????????
day_list <- pdata$Day # ?????? ?????????
time_list <- pdata$AvailableTime # ???????????? ?????????
date_list = strptime(date_str_list, format="%d/%m/%Y") # ?????? ???????????? ?????? ?????? ?????????
# ????????? ????????? ????????????. %d/%m/%Y
len = length(pdata$Date) # ??? ??????
print(len)

aircondition_list <- c() # ??? ?????? ??????
weather_list <- c() # ??? ?????? ??????

# ?????? ????????? ?????? ??????
for (i in (1:len)) {
  date = as.Date(date_list[i])
  p <- as.POSIXlt(date) # ????????? ????????????
  nth_day = as.numeric(p$mday) #????????? ??? ??? ?????????
  month = as.numeric(p$mon) # 3????????? 2, 4????????? 3
  print(month)
  
  # ????????? 3?????????
  if (month == 2) {
    aircondition = aircondition_march[nth_day]
    weather = weather_march[nth_day]
  }
  # ????????? 4?????????
  else if (month == 3) {
    aircondition = aircondition_april[nth_day]
    weather = weather_april[nth_day]
  }
  # ????????? 5?????????  
  else if (month == 4) {
    aircondition = aircondition_may[nth_day]
    weather = weather_may[nth_day]
  }
  
  
  aircondition_list = append(aircondition_list, aircondition, after=(i-1))
  weather_list = append(weather_list, weather, after=(i-1))
}

dsave <- data.frame(key_list, date_list, day_list, time_list, aircondition_list, weather_list)
colnames(dsave) = c('Key','Date','Day','AvailableTime', 'AirScore', 'WeatherScore')

dfile <- paste("Final.csv",sep="")

write.csv(dsave,file = dfile,row.names = F)

